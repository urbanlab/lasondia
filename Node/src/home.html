<!DOCTYPE html>
<html>

<head>

    <meta charset="UTF-8">
    <meta name="viewport" width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0>
    <link rel="stylesheet" href="/src/style.css">
    <title>Home</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <style>
      body {
       .column {
        float: left;
        width: 33.33%;
    }
    /* Clear floats after the columns */
    .row:after {
        content: "";
        display: table;
        clear: both;
    }
      }
      </style>
</head>

<body class="w3-light-grey">
  <div id="nav-placeholder"></div>


    <!-- !PAGE CONTENT! -->
    <div class="content">

    <div class="w3-main w3-content records-list-container" style="max-width:1600px;margin-top:83px">


    </div>



    <!-- Footer -->
    <footer class="w3-container w3-padding-32 w3-grey">
        <div class="w3-row-padding">
            <div class="w3-third">
                <h3 style="color:#190B01;">INFO</h3>
                <p style="color:#190B01;">Apprenez la musique facilement avec la SondIA ! Profitez de vos cours analysés automatiquement grâce à notre IA de manière à progresser encore plus rapidement. </p>
            </div>

            <div class="w3-third">
                <h3 style="color:#190B01;">NOUVEAUTÉS</h3>
                <ul class="w3-ul">
                    <li class="w3-padding-16">
                        <img src="https://i.imgur.com/nAb1mKi.png" class="w3-left w3-margin-right" style="width:20px">
                        <span class="w3-large" style="color:#190B01;">Une interface améliorée</span><br>
                        <span style="color:#190B01;">Pour des interactions toujours plus faciles, nous avons repensé l'interface d'enregistrement des cours.</span>
                    </li>
                    <li class="w3-padding-16">
                        <img src="https://i.imgur.com/nAb1mKi.png" class="w3-left w3-margin-right" style="width:20px; color:#190B01;">
                        <span class="w3-large" style="color:#190B01;">Des contenus exclusifs</span><br>
                        <span style="color:#190B01;">Retrouvez l'intégralité de vos cours sur notre site ! </span>
                    </li>
                </ul>
            </div>

            <div class="w3-third">
                <h3 style="color:#190B01;">TAGS</h3>
                <p>
                    <span class="w3-tag w3-margin-bottom" style='background-color:#190B01'>Musique</span> <span class="w3-tag w3-dark-grey w3-small w3-margin-bottom">Apprentissage</span> <span class="w3-tag w3-dark-grey w3-small w3-margin-bottom">IA</span>
                    <span class="w3-tag w3-dark-grey w3-small w3-margin-bottom">Team</span> <span class="w3-tag w3-dark-grey w3-small w3-margin-bottom">Pédagogie</span> <span class="w3-tag w3-dark-grey w3-small w3-margin-bottom">Plaisir</span>
                    <span class="w3-tag w3-dark-grey w3-small w3-margin-bottom">Piano</span> <span class="w3-tag w3-dark-grey w3-small w3-margin-bottom">Enregistrement</span> <span class="w3-tag w3-dark-grey w3-small w3-margin-bottom">Amour</span>
                    <span class="w3-tag w3-dark-grey w3-small w3-margin-bottom">Mozart</span> <span class="w3-tag w3-dark-grey w3-small w3-margin-bottom">Partition</span> <span class="w3-tag w3-dark-grey w3-small w3-margin-bottom">Progression</span>
                    <span class="w3-tag w3-dark-grey w3-small w3-margin-bottom">Violon</span> <span class="w3-tag w3-dark-grey w3-small w3-margin-bottom">Test</span>
                </p>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
    <script>
    var socket = io('http://192.168.81.109:8000/');
    socket.on('recordList', function(data) {
      listRecordsLinks(data.recordList[0]);
    });
    function readTextFile(file, callback) {
        var rawFile = new XMLHttpRequest();
        rawFile.overrideMimeType("application/json");
        rawFile.open("GET", file, false);
        rawFile.onreadystatechange = function() {
            if (rawFile.readyState === 4 && rawFile.status == "200") {
                callback(rawFile.responseText);
            }
        }
        rawFile.send(null);
    }
    function listRecordsLinks(recordsList) {
      var colors = ['1FB671','FB4807','FF695B','5FFFCD'];
      $('.records-list-container').empty();
      $()
      var finalList = []
      for (var i = 0; i < recordsList.length; i++) {
        readTextFile("/records/" + recordsList[i] + "/date.json", function(text) {
          var date = JSON.parse(text).date;
          var day = date.substr(4, 10);
          var hour = date.substr(15 , date.length);
          var day_tab = day.split('/');
          var actual_date = day_tab[2] + day_tab[1] + day_tab[0] + hour.split(':')[0] + hour.split(':')[1];
          finalList.push({'actual_date':actual_date,'record':recordsList[i]});
        });
      }
      finalList.sort(function(a,b){
        if (a.actual_date && b.actual_date)
          return (b.actual_date.toString().localeCompare(a.actual_date.toString()));
        return (0);
      });
      for (var i = 0; i < finalList.length; i++) {
        readTextFile("/records/" + finalList[i].record + "/date.json", function(text) {
          var r = Math.floor(Math.random() * colors.length);
          var date = JSON.parse(text).date;
          var days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
          var frenchDays = ['Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi', 'Dimanche'];
          var french = frenchDays[days.indexOf(date.substr(0, 3))];
          var final = french + " " + date.substr(4, date.length)
          $('.records-list-container').append('<div style="background-color:#'+colors[r]+'"><a style="text-decoration:none;" href="/analysis#'+finalList[i].record+'">'+final+'</a><a href="/analysis#'+finalList[i].record+'"><img src="https://i.imgur.com/3dpbFb1.png" alt="Mountain View" class="image_list"></a></div></body>');
        });
      }
    }
    </script>

    <script>
        // Script to open and close sidebar
        function w3_open() {
            document.getElementById("mySidebar").style.display = "block";
            document.getElementById("myOverlay").style.display = "block";
        }
        function w3_close() {
            document.getElementById("mySidebar").style.display = "none";
            document.getElementById("myOverlay").style.display = "none";
        }
        // Modal Image Gallery
        function onClick(element) {
            document.getElementById("img01").src = element.src;
            document.getElementById("modal01").style.display = "block";
            var captionText = document.getElementById("caption");
            captionText.innerHTML = element.alt;
        }
    </script>
    <script src="/src/navbar_loader.js"></script>
    </div>
</body>

</html>
